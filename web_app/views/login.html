
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="./api-services"></script>
<meta charset="UTF-8">
</head>
<body ng-app="My-app">
<div id = "login" ng-controller="LoginController" ui-view>
  <form ng-submit="(submitted=true && submit()">
	<label id="mailArea">
		<span>e-mail</span>
		<input id="UserMail" ng-model="user.email" type="text" name="Form" />
	</label>
	<label id="PwdArea">
		<span>Password</span>
		<input id="UserPwd" ng-model="user.password" type="text" name="Form" />
	</label>
	<input type="submit" value="Valider" />
  </form>
  <pre>userMail = {{user.email | json}}</pre>
  <pre>userPassword = {{user.password | json}}</pre>
  <pre>master = {{master | json}}</pre>
</div>

<script>
	var isLog = false;
	
	angular.module('formLogin', []).controller('LoginController', ['$scope', function($scope){
	$scope.master={};
	
	$scope.login = function(userMail, userPassword){
		var MyMail;
		var MyPwd;
		
		var response = DbUser.find();
		console.log(response);
		angular.forEach(response, function(value, key) {
			
			if(key == "email"){
				MyMail = value;
			}
			else if(key == "password"){
				MyPwd = value
			}
			else if( MyMail != null && MyPwd != null){
				if(user.email == MyMail && user.password == MyPwd)
				{
					isLog = true;
					MyMail = null;
					MyPwd = null;
					exit;
				}
				else{
					MyMail = null;
					MyPwd = null;
				}
			}
			else{
			
			}
		}, log);
	}}]);
</script>
</body>
</html>